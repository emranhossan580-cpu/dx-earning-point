<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DX Earning Point</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,Segoe UI;
  background:#020617;
  color:#fff;
  display:flex;
  justify-content:center;
}
.app{
  max-width:420px;
  width:100%;
  padding:15px;
}
.card{
  background:#0b1220;
  border-radius:14px;
  padding:18px;
  margin-bottom:14px;
}
h1{text-align:center;color:#38bdf8;margin:0}
.points{
  font-size:32px;
  text-align:center;
  color:#22c55e;
}
.btn{
  width:100%;
  padding:12px;
  margin-top:8px;
  border:none;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
}
.claim{background:#22c55e}
.task{background:#38bdf8}
.withdraw{background:#f59e0b}
input{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:8px;
  border:none;
}
.small{text-align:center;font-size:12px;opacity:.6}
.admin{display:none}
</style>
</head>

<body>
<div class="app">

<div class="card">
<h1>DX Earning Point</h1>
<div class="small">Telegram ID: <span id="uid">Detecting...</span></div>
<div class="points">ğŸ’° <span id="points">0</span></div>
<button class="btn claim" onclick="dailyClaim()">ğŸ Daily +5</button>
<button class="btn task" onclick="viewAd()">ğŸ“¢ View Ad +10</button>
</div>

<div class="card">
<h3>ğŸ’¸ Withdraw</h3>
<input id="method" placeholder="Bkash / Nagad">
<input id="number" placeholder="Number">
<input id="amount" type="number" placeholder="Points">
<button class="btn withdraw" onclick="withdraw()">Submit</button>
<div class="small">Manual admin approve</div>
</div>

<div class="card admin" id="admin">
<h3>ğŸ›  Admin Panel</h3>
<div id="withdrawList"></div>
</div>

</div>

<script>
/* ========= CONFIG ========= */
const ADMIN_ID = "8517600317"; // ğŸ‘‰ à¦¤à§‹à¦®à¦¾à¦° Telegram ID
const BOT_TOKEN = "YOUR_BOT_TOKEN"; // ğŸ”´ à¦à¦–à¦¾à¦¨à§‡ à¦¬à¦¸à¦¾à¦¬à§‡
const AD_LINK = "YOUR_ADSTERRA_DIRECT_LINK"; // ğŸ”´ à¦à¦–à¦¾à¦¨à§‡ à¦¬à¦¸à¦¾à¦¬à§‡
/* ========================= */

let tgId = "guest";

if(window.Telegram?.WebApp){
 Telegram.WebApp.ready();
 const u = Telegram.WebApp.initDataUnsafe?.user;
 if(u) tgId = u.id;
}

document.getElementById("uid").innerText = tgId;

const key = "dx_" + tgId;
let points = parseInt(localStorage.getItem(key)) || 0;

function update(){
 document.getElementById("points").innerText = points;
 localStorage.setItem(key, points);
}
update();

/* DAILY */
function dailyClaim(){
 const k = "daily_" + tgId;
 const t = new Date().toDateString();
 if(localStorage.getItem(k) === t){
  alert("Already claimed");
  return;
 }
 points += 5;
 localStorage.setItem(k,t);
 update();
}

/* AD TASK */
function viewAd(){
 if(localStorage.getItem("adlock_"+tgId)){
  alert("Wait before next ad");
  return;
 }
 window.open(AD_LINK,"_blank");
 localStorage.setItem("adlock_"+tgId,true);

 setTimeout(()=>{
  points += 10;
  update();
  localStorage.removeItem("adlock_"+tgId);
 },7000);
}

/* WITHDRAW */
function withdraw(){
 const m = method.value;
 const n = number.value;
 const a = parseInt(amount.value);

 if(!m||!n||!a) return alert("Fill all");
 if(a>points) return alert("Not enough points");

 let w = JSON.parse(localStorage.getItem("withdraws")||"[]");
 w.push({uid:tgId,method:m,number:n,amount:a,time:new Date().toLocaleString()});
 localStorage.setItem("withdraws",JSON.stringify(w));

 points -= a;
 update();
 notifyAdmin(a);
 alert("Request sent");
}

/* ADMIN */
if(tgId == ADMIN_ID){
 document.getElementById("admin").style.display="block";
 loadWithdraws();
}

function loadWithdraws(){
 const list = JSON.parse(localStorage.getItem("withdraws")||"[]");
 withdrawList.innerHTML = list.map(x =>
  `<div>ğŸ‘¤ ${x.uid}<br>ğŸ’¸ ${x.amount}<br>${x.method} - ${x.number}<hr></div>`
 ).join("");
}

/* TELEGRAM ADMIN NOTIFY */
function notifyAdmin(amount){
 if(!BOT_TOKEN) return;
 fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({
   chat_id:ADMIN_ID,
   text:`New Withdraw Request\nUser: ${tgId}\nAmount: ${amount}`
  })
 });
}
</script>
</body>
</html>
